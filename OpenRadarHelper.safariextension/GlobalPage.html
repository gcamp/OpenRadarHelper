<!DOCTYPE HTML>
<html>
<head>
   <title>old extension bar page</title>
   <script type="text/javascript">
   
   function respondToMessage(messageEvent) {   
       if (messageEvent.name == "getDuplicateValue") {
             var value = localStorage.getItem(messageEvent.message);
             var returnedValue = [messageEvent.message, value];
             safari.application.activeBrowserWindow.activeTab.page.dispatchMessage("duplicate", returnedValue);
       } 
       else if (messageEvent.name == "getOpenRadarValue") {
             var value = localStorage.getItem(messageEvent.message);
             var returnedValue = [messageEvent.message, value];
             safari.application.activeBrowserWindow.activeTab.page.dispatchMessage("openRadar", returnedValue);
       } 
       else if (messageEvent.name == "getUpdateValue") {
             var value = localStorage.getItem(messageEvent.message);
             var returnedValue = [messageEvent.message, value];
             safari.application.activeBrowserWindow.activeTab.page.dispatchMessage("update", returnedValue);
       } 
       else if (messageEvent.name == "getSettingValue") {
       		var settingValue = safari.extension.settings.getItem(messageEvent.message);
       		safari.application.activeBrowserWindow.activeTab.page.dispatchMessage(messageEvent.message, settingValue);
       }
       else {
 	      localStorage.setItem(messageEvent.name, messageEvent.message);
       }
   }
   
   safari.application.addEventListener("message", respondToMessage,false);
   
   
   </script>
</head>
<body>
</body>
</html>